function wUserGuide(studyInfo)
%
%   function wUserGuide(studyInfo)
%
%   This wUserGuide function takes in the studyInfo at the end of the study
%   specific GUI, and creates a personalized "README-FIRST.txt" containing
%   instructions on how to run the study experiment created. 
%
% (c) Duc T. Nguyen and Blair Kaneshiro, 2017
% Distributed under Creative Commons Zero (CC0) license
% Contact: audexpcreator@gmail.com

line{1}='EXPERIMENTER USER GUIDE';

line{3}=sprintf(['Welcome to the experimenter user guide for "%s:',...
    ' %s". This guide is here to provide',...  
    ' you with quick instructions on how to operate the experiment',... 
    ' you''ve just finished designing using the Experiment Template',...
    ' MATLAB toolbox.'], studyInfo.name, studyInfo.type);

line{5}=sprintf(['First, the experiment that you''ve just designed is called:',...
	' %s. This experiment is a %s',...
    ' experiment.'], studyInfo.name, studyInfo.type);

line{8}='To operate this experiment:';

line{10}=['1. Please ensure that you have properly installed PsychToolBox-3',... 
	' onto the computer that you are running this experiment',...
	' (http://psychtoolbox.org/).']; 

line{12}=['2. Please ensure that you have properly installed the correct',... 
	' audio driver for that computer in order to run your auditory',... 
	' stims. If you are using Windows the correct driver is ASIO4ALL',...
    ' - Universal ASIO Driver For WDM Audio.'];

if strcmp(studyInfo.niReady, 'Yes NI Device Ready')
    line{14}=sprintf(['3. This %s experiment is NI Device Ready. This means that you need',...
        ' to be sure that the NI device is hooked up and detectable by the computer and MATLAB',...
        ' before your experiment can run. Otherwise it will error out. For more information on how',...
        ' to do this look in the Toolbox Manual.'], studyInfo.type);
    
    line{16}=sprintf(['4. Open MATLAB and make sure that MATLAB is the only program',...
        ' open. This helps to limit any interference from other programs',...
        ' while running your experiment. Within MATLAB, change your',...
        ' directory to the folder containing your experiment. For this',...
        ' experiment the path is:',...
        ' \n\t%s'], studyInfo.path);
    
    line{18}=sprintf(['5. Run the %sExp.m script, or simply type %sExp into the command',...
        ' line of MATLAB to start the experiment.'], studyInfo.name, studyInfo.name);
    
    line{20}=['6. The experiment will start by prompting you for today''s date,',...
        ' and the subject you are currently running. Please be sure not to',...
        ' exceed the total number of subjects you originally specified for',...
        ' the experiment. If you do, you will receive a message reminder',...
        ' and the experiment will terminate.'];
    
    if studyInfo.presNum>1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus',...
            ' presentation and to split a round of stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' questions on which presentation you are on and which recording',...
            ' session you are on. (Warning, there are failsafe checks should you',...
            ' exceed those numbers.)'];
    elseif studyInfo.presNum>1 && studyInfo.recNum==1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus ',...
            ' presentation, you will be prompted with a question on which ',...
            ' presentation you are on. (Warning, there are failsafe checks',...
            ' should you exceed that number.)'];
    elseif studyInfo.presNum==1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen to split your stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' question on which recording session you are on. (Warning, there',...
            ' are failsafe checks should you exceed that number.)'];
    else
        line{22}=['7. Since you''ve designed your experiment with only 1 presentation',...
            ' round and 1 recording session, you will not be prompted with',...
            ' additional questions on these settings.'];
    end
    
    line{24}=['8. Psychtoolbox will start running screen and video graphics',...
        ' checks to test for compatibility before your experiment starts.',...
        ' Therefore, make sure that you are running with compatible',...
        ' hardware.'];
    
    line{26}=['9. Your experiment is now displayed on the screen. If you are',...
        ' using an additional monitor for stimulus presentation, now is a',...
        ' good time to switch the screen over and mirror the screen.',...
        ' (Please mirror only. This will also help you monitor and track',...
        ' your subject''s progress.)'];
    subL=27;
    lineNum=10;
elseif strcmp(studyInfo.niReady, 'Not NI Device Ready')
    line{14}=sprintf(['3. This %s experiment is NOT NI Device Ready. This means that',...
        ' the NI device does not need to be hooked up nor detectable by the computer and MATLAB.',...
        ' Your experiment will run fine without the NI Device. Of course this means that',...
        ' no triggers are currently sent out by this experiment. If you would like to change this,'...
        ' run the "check.m" or type "check" into the command window while in the experiment folder,'...
        ' and select the option to make this experiment NI Device Ready.'], studyInfo.type);
    
    line{16}=sprintf(['4. Open MATLAB and make sure that MATLAB is the only program',...
        ' open. This helps to limit any interference from other programs',...
        ' while running your experiment. Within MATLAB, change your',...
        ' directory to the folder containing your experiment. For this',...
        ' experiment the path is:',...
        ' \n\t%s'], studyInfo.path);
    
    line{18}=sprintf(['5. Run the %sExp.m script, or simply type %sExp into the command',...
        ' line of MATLAB to start the experiment.'], studyInfo.name, studyInfo.name);
    
    line{20}=['6. The experiment will start by prompting you for today''s date,',...
        ' and the subject you are currently running. Please be sure not to',...
        ' exceed the total number of subjects you originally specified for',...
        ' the experiment. If you do, you will receive a message reminder',...
        ' and the experiment will terminate.'];
    
    if studyInfo.presNum>1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus',...
            ' presentation and to split a round of stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' questions on which presentation you are on and which recording',...
            ' session you are on. (Warning, there are failsafe checks should you',...
            ' exceed those numbers.)'];
    elseif studyInfo.presNum>1 && studyInfo.recNum==1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus ',...
            ' presentation, you will be prompted with a question on which ',...
            ' presentation you are on. (Warning, there are failsafe checks',...
            ' should you exceed that number.)'];
    elseif studyInfo.presNum==1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen to split your stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' question on which recording session you are on. (Warning, there',...
            ' are failsafe checks should you exceed that number.)'];
    else
        line{22}=['7. Since you''ve designed your experiment with only 1 presentation',...
            ' round and 1 recording session, you will not be prompted with',...
            ' additional questions on these settings.'];
    end
    
    line{24}=['8. Psychtoolbox will start running screen and video graphics',...
        ' checks to test for compatibility before your experiment starts.',...
        ' Therefore, make sure that you are running with compatible',...
        ' hardware.'];
    
    line{26}=['9. Your experiment is now displayed on the screen. If you are',...
        ' using an additional monitor for stimulus presentation, now is a',...
        ' good time to switch the screen over and mirror the screen.',...
        ' (Please mirror only. This will also help you monitor and track',...
        ' your subject''s progress.)'];
    subL=27;
    lineNum=10;
elseif strcmp(studyInfo.niReady, 'Yes Ethernet Ready')
        line{14}=sprintf(['3. This %s experiment is Ethernet Ready. This means that you need',...
        ' to be sure that the TCP/IP connection is established between the experimental computer',...
        ' and the EGI Data Acquisiton (DAQ) computer before running. Otherwise it will error out.',...
        ' For more information on how to establish connection look in the Toolbox Manual.'], studyInfo.type);
    
    line{16}=sprintf(['4. Open MATLAB and make sure that MATLAB is the only program',...
        ' open. This helps to limit any interference from other programs',...
        ' while running your experiment. Within MATLAB, change your',...
        ' directory to the folder containing your experiment. For this',...
        ' experiment the path is:',...
        ' \n\t%s'], studyInfo.path);
    
    line{18}=sprintf(['5. Run the %sExp.m script, or simply type %sExp into the command',...
        ' line of MATLAB to start the experiment.'], studyInfo.name, studyInfo.name);
    
    line{20}=['6. The experiment will first prompt you with information regarding your',...
        ' TCP/IP connection with NetStation. Specifically, it will ask you for the host',...
        ' ip address of the EGI DAQ/NetStation, and it will ask you for the connection port',...
        ' which in NetStation is default at 55513. It will also ask you if you want to save',...
        ' that information for future use. After it will try to establish a connection with',...
        ' NetStation so be sure that your NetStation session is up and prep to start recordining.',...
        ' If connection is made it will then try to synchronize to NetStation for timing.',...
        ' If connection is not made it will error out and tell you connection failed.',...
        ' If synchonization failed it will also error and tell you so. If connection and synchronization',...
        ' is accomplished, then the experiment will prompt you for',...
        ' today''s date, and the subject you are currently running. Please be sure not to',...
        ' exceed the total number of subjects you originally specified for',...
        ' the experiment. If you do, you will receive a message reminder',...
        ' and the experiment will terminate.'];
    
    if studyInfo.presNum>1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus',...
            ' presentation and to split a round of stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' questions on which presentation you are on and which recording',...
            ' session you are on. (Warning, there are failsafe checks should you',...
            ' exceed those numbers.)'];
    elseif studyInfo.presNum>1 && studyInfo.recNum==1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus ',...
            ' presentation, you will be prompted with a question on which ',...
            ' presentation you are on. (Warning, there are failsafe checks',...
            ' should you exceed that number.)'];
    elseif studyInfo.presNum==1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen to split your stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' question on which recording session you are on. (Warning, there',...
            ' are failsafe checks should you exceed that number.)'];
    else
        line{22}=['7. Since you''ve designed your experiment with only 1 presentation',...
            ' round and 1 recording session, you will not be prompted with',...
            ' additional questions on these settings.'];
    end
    
    line{24}=['8. Psychtoolbox will start running screen and video graphics',...
        ' checks to test for compatibility before your experiment starts.',...
        ' Therefore, make sure that you are running with compatible',...
        ' hardware.'];
    
    line{26}=['9. Your experiment is now displayed on the screen. If you are',...
        ' using an additional monitor for stimulus presentation, now is a',...
        ' good time to switch the screen over and mirror the screen.',...
        ' (Please mirror only. This will also help you monitor and track',...
        ' your subject''s progress.)'];
    subL=27;
    lineNum=10;
elseif strcmp(studyInfo.niReady, 'Not Ethernet Ready')
        line{14}=sprintf(['3. This %s experiment is NOT Ethernet Ready. This means that you do not need',...
        ' to establish TCP/IP connection the experimental computer and the EGI Data Acquisiton (DAQ) computer',...
        ' to run. The experiment will run as if it is "offline" therefore no signal for triggers will be sent',...
        ' for trigger output. If you would like to change this, run the "check.m" or type "check" into the',...
        ' command window while in the experiment folder, and select the option to make this experiment Ethernet Ready.'], studyInfo.type);
    
    line{16}=sprintf(['4. Open MATLAB and make sure that MATLAB is the only program',...
        ' open. This helps to limit any interference from other programs',...
        ' while running your experiment. Within MATLAB, change your',...
        ' directory to the folder containing your experiment. For this',...
        ' experiment the path is:',...
        ' \n\t%s'], studyInfo.path);
    
    line{18}=sprintf(['5. Run the %sExp.m script, or simply type %sExp into the command',...
        ' line of MATLAB to start the experiment.'], studyInfo.name, studyInfo.name);
    
    line{20}=['6. The experiment will start by prompting you for today''s date,',...
        ' and the subject you are currently running. Please be sure not to',...
        ' exceed the total number of subjects you originally specified for',...
        ' the experiment. If you do, you will receive a message reminder',...
        ' and the experiment will terminate.'];
    
    if studyInfo.presNum>1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus',...
            ' presentation and to split a round of stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' questions on which presentation you are on and which recording',...
            ' session you are on. (Warning, there are failsafe checks should you',...
            ' exceed those numbers.)'];
    elseif studyInfo.presNum>1 && studyInfo.recNum==1
        line{22}=['7. Since you''ve chosen for more than 1 round of stimulus ',...
            ' presentation, you will be prompted with a question on which ',...
            ' presentation you are on. (Warning, there are failsafe checks',...
            ' should you exceed that number.)'];
    elseif studyInfo.presNum==1 && studyInfo.recNum>1
        line{22}=['7. Since you''ve chosen to split your stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' question on which recording session you are on. (Warning, there',...
            ' are failsafe checks should you exceed that number.)'];
    else
        line{22}=['7. Since you''ve designed your experiment with only 1 presentation',...
            ' round and 1 recording session, you will not be prompted with',...
            ' additional questions on these settings.'];
    end
    
    line{24}=['8. Psychtoolbox will start running screen and video graphics',...
        ' checks to test for compatibility before your experiment starts.',...
        ' Therefore, make sure that you are running with compatible',...
        ' hardware.'];
    
    line{26}=['9. Your experiment is now displayed on the screen. If you are',...
        ' using an additional monitor for stimulus presentation, now is a',...
        ' good time to switch the screen over and mirror the screen.',...
        ' (Please mirror only. This will also help you monitor and track',...
        ' your subject''s progress.)'];
    subL=27;
    lineNum=10;
else
    line{14}=sprintf(['3. Open MATLAB and make sure that MATLAB is the only program',...
        ' open. This helps to limit any interference from other programs',...
        ' while running your experiment. Within MATLAB, change your',...
        ' directory to the folder containing your experiment. For this',...
        ' experiment the path is:',...
        ' \n\t%s'], studyInfo.path);
    
    line{16}=sprintf(['4. Run the %sExp.m script, or simply type %sExp into the command',...
        ' line of MATLAB to start the experiment.'], studyInfo.name, studyInfo.name);
    
    line{18}=['5. The experiment will start by prompting you for today''s date,',...
        ' and the subject you are currently running. Please be sure not to',...
        ' exceed the total number of subjects you originally specified for',...
        ' the experiment. If you do, you will receive a message reminder',...
        ' and the experiment will terminate.'];
    
    if studyInfo.presNum>1 && studyInfo.recNum>1
        line{20}=['6. Since you''ve chosen for more than 1 round of stimulus',...
            ' presentation and to split a round of stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' questions on which presentation you are on and which recording',...
            ' session you are on. (Warning, there are failsafe checks should you',...
            ' exceed those numbers.)'];
    elseif studyInfo.presNum>1 && studyInfo.recNum==1
        line{20}=['6. Since you''ve chosen for more than 1 round of stimulus ',...
            ' presentation, you will be prompted with a question on which ',...
            ' presentation you are on. (Warning, there are failsafe checks',...
            ' should you exceed that number.)'];
    elseif studyInfo.presNum==1 && studyInfo.recNum>1
        line{20}=['6. Since you''ve chosen to split your stimulus presentation into',...
            ' more than one recording session, you will be prompted with',...
            ' question on which recording session you are on. (Warning, there',...
            ' are failsafe checks should you exceed that number.)'];
    else
        line{20}=['6. Since you''ve designed your experiment with only 1 presentation',...
            ' round and 1 recording session, you will not be prompted with',...
            ' additional questions on these settings.'];
    end
    
    line{22}=['7. Psychtoolbox will start running screen and video graphics',...
        ' checks to test for compatibility before your experiment starts.',...
        ' Therefore, make sure that you are running with compatible',...
        ' hardware.'];
    
    line{24}=['8. Your experiment is now displayed on the screen. If you are',...
        ' using an additional monitor for stimulus presentation, now is a',...
        ' good time to switch the screen over and mirror the screen.',...
        ' (Please mirror only. This will also help you monitor and track',...
        ' your subject''s progress.)'];
    subL=25;
    lineNum=9;
end


if strcmp(studyInfo.type,'Behavioral Rating Study')
    line{subL+1}=sprintf('%d. Keys you should be aware of:',lineNum);
    line{subL+2}=sprintf('*To force quit the experiment please press: %s', studyInfo.fQuitKey);
    line{subL+3}=sprintf(['*To exit the start screen with the "%s" text please',...
        ' \tpress: %s'], studyInfo.readyStruct.text, studyInfo.readyStruct.exitB);
    line{subL+4}='*To exit the break screen please press: SPACE Bar';
    line{subL+5}='*The stim screen and blank screen are both timed to exit.';
    line{subL+6}=sprintf(['*To exit the questions the subject should input an',...
        ' \taccepted response.']);
    line{subL+7}=sprintf(['*To exit the end screen, you, the experimenter, should',...
        ' \tpress: %s'],studyInfo.endStruct.exitB);
    tabLine=subL+2:subL+7;
    subL=subL+8;
elseif strcmp(studyInfo.type,'Comparison Behav. Rating Study')
    line{subL+1}=sprintf('%d. Keys you should be aware of:',lineNum);
    line{subL+2}=sprintf('*To force quit the experiment please press: %s', studyInfo.fQuitKey);
    line{subL+3}=sprintf(['*To exit the start screen with the "%s" text please',...
        ' \tpress: %s'], studyInfo.readyStruct.text, studyInfo.readyStruct.exitB);
    line{subL+4}='*To exit the break screen please press: SPACE Bar';
    line{subL+5}='*The stim screen and blank screen are both timed to exit.';
    line{subL+6}=sprintf(['*To exit the questions the subject should input an',...
        ' \taccepted response.']);
    line{subL+7}=sprintf(['*To exit the end screen, you, the experimenter, should',...
        ' \tpress: %s'],studyInfo.endStruct.exitB);
    tabLine=subL+2:subL+7;
    subL=subL+8;
    
elseif strcmp(studyInfo.type,'Continuous Behav. Rating Study')
    line{subL+1}=sprintf('%d. Keys you should be aware of:',lineNum);
    line{subL+2}=sprintf('*To force quit the experiment please press: %s', studyInfo.fQuitKey);
    line{subL+3}=sprintf(['*To exit the start screen with the "%s" text please',...
        ' \tpress: %s'], studyInfo.readyStruct.text, studyInfo.readyStruct.exitB);
    line{subL+4}=sprintf('*To exit the instruction screen please press: %s', studyInfo.insSStruct.exitB);
    line{subL+5}=sprintf('*To exit the prep screen please press: %s', studyInfo.prepSStruct.exitB);
    line{subL+6}='*The fixed, stim and blank screen are all timed to exit.';
    tabLine=subL+2:subL+6;
    subL=subL+5;
    if strcmp(studyInfo.coBeInfo.questOpts,'No end question(s)')
    else
    line{subL+1}=sprintf(['*To exit the questions the subject should input an ',...
        ' \taccepted response.']);
    tabLine=[tabLine subL+1];
    subL=subL+1;
    end
    line{subL+1}=sprintf(['*To exit the end screen, you, the experimenter, should',...
        ' \tpress: %s'],studyInfo.endStruct.exitB);
    tabLine=[tabLine subL+1];
    subL=subL+2;
elseif strcmp(studyInfo.type,'EEG Study') 
    line{subL+1}=sprintf('%d. Keys you should be aware of:',lineNum);
    line{subL+2}=sprintf('*To force quit the experiment please press: %s', studyInfo.fQuitKey);
    line{subL+3}=sprintf(['*To exit the start screen with the "%s" text please',...
        ' \tpress: %s'], studyInfo.readyStruct.text, studyInfo.readyStruct.exitB);
    line{subL+4}=sprintf('*To exit the break screen please press: %s Bar', studyInfo.breakStruct.exitB);
    line{subL+5}='*The stim screen and blank screen are both timed to exit.';
    tabLine=subL+2:subL+5;
    subL=subL+5;
    if strcmp(studyInfo.eSInfo.questOpts,'No questions(s)')
    else
        line{subL+1}=sprintf(['*To exit the questions the subject should input an',...
            ' \taccepted response.']);
        tabLine=[tabLine subL+1];
        subL=subL+1;
    end
    line{subL+1}=sprintf(['*To exit the end screen, you, the experimenter, should',...
        ' \tpress: %s'],studyInfo.endStruct.exitB);
    tabLine=[tabLine subL+1];
    subL=subL+2;

elseif strcmp(studyInfo.type,'Neurophysiological Study')
    line{subL+1}=sprintf('%d. Keys you should be aware of:',lineNum);
    line{subL+2}=sprintf('*To force quit the experiment please press: %s', studyInfo.fQuitKey);
    line{subL+3}=sprintf(['*To exit the start screen with the "%s" text please',...
        ' \tpress: %s'], studyInfo.readyStruct.text, studyInfo.readyStruct.exitB);
    line{subL+4}=sprintf('*To exit the break screen please press: %', studyInfo.breakStruct.exitB);
    line{subL+5}='*The noise, stim and blank screen are all timed to exit.';
    tabLine=subL+2:subL+5;
    subL=subL+5;
    if strcmp(studyInfo.nSInfo.questOpts,'No questions(s)')
    else
        line{subL+1}=sprintf(['*To exit the questions the subject should input an ',...
            ' \taccepted response.']);
        tabLine=[tabLine subL+1];
        subL=subL+1;
    end
    line{subL+1}=sprintf(['*To exit the end screen, you, the experimenter, should',...
        ' \tpress: %s'],studyInfo.endStruct.exitB);
    tabLine=[tabLine subL+1];
    subL=subL+2;
end

if strcmp(studyInfo.type,'EEG Study')
    if studyInfo.yesData
        line{subL+1}=sprintf(['%d. This %s experiment does output data from MATLAB.',...
            ' Your data is saved in the "data" folder of your',...
            ' experiment folder. The data is named with the subject number, the',...
            ' "today''s date" that was originally input at the time and',...
            ' presentation number, and recording number if applicable saved as ''_ES.mat''.',...
            ' ''_ES.mat'' contains a data structure "rData" with the fields of "trigger"',...
            ' to correspond with the stimulus played, "question" corresponding with the',...
            ' question(s) asked, "response" corresponding to the subject''s',...
            ' response, and "responseTime" correspondingto the time it took the',...
            ' subject to answer the question.',...
            ' \nIf this experiment is NI Device Ready, then it will also output triggers corresponding',...
            ' to the subject''s responses straight into the EEG recording data as DINs.'], lineNum+1, studyInfo.type);
    else
        line{subL+1}=sprintf(['%d. This %s experiment does not output any data from MATLAB.',...
            ' If this experiment is NI Device Ready, then it will output triggers corresponding',...
            ' to the subject''s responses straight into the EEG recording data as DINs.'], lineNum+1, studyInfo.type);
    end
elseif strcmp(studyInfo.type,'Neurophysiological Study')
    if studyInfo.yesData
        line{subL+1}=sprintf(['%d. This %s experiment does output data from MATLAB.',...
            ' Your data is saved in the "data" folder of your',...
            ' experiment folder. The data is named with the subject number, the',...
            ' "today''s date" that was originally input at the time and',...
            ' presentation number, and recording number if applicable saved as ''_NS.mat''.',...
            ' ''_NS.mat'' contains a data structure "rData" with the fields of "trigger"',...
            ' to correspond with the stimulus played, "question" corresponding with the',...
            ' question(s) asked, "response" corresponding to the subject''s',...
            ' response, and "responseTime" correspondingto the time it took the',...
            ' subject to answer the question.',...
            ' \nIf this experiment is NI Device Ready, then it will also output triggers corresponding',...
            ' to the subject''s responses straight into the EEG recording data as DINs.'], lineNum+1, studyInfo.type);
    else
        line{subL+1}=sprintf(['%d. This %s experiment does not output any data from MATLAB.',...
            ' If this experiment is NI Device Ready, then it will output triggers corresponding',...
            ' to the subject''s responses straight into the EEG recording data as DINs.'], lineNum+1, studyInfo.type);
    end
elseif strcmp(studyInfo.type,'Behavioral Rating Study')
    line{subL+1}=sprintf(['%d. Data output. Your data is saved in the "data" folder of your',...
        ' experiment folder. The data is named with the subject number, the',...
        ' "today''s date" that was originally input at the time and',...
        ' presentation number, and recording number if applicable saved as ''_BR.mat''.',...
        ' ''_BR.mat'' contains a data structure "rData" with the fields of "trigger"',...
        ' to correspond with the stimulus played, "question" corresponding with the',...
        ' question(s) asked, "response" corresponding to the subject''s',...
        ' response, and "responseTime" correspondingto the time it took the',...
        ' subject to answer the question.'],lineNum+1);
elseif strcmp(studyInfo.type,'Comparison Behav. Rating Study')
    line{subL+1}=sprintf(['%d. Data output. Your data is saved in the "data" folder of your',...
    	' experiment folder. The data is named with the subject number, the',...
    	' "today''s date" that was originally input at the time and',...
    	' presentation number, and recording number if applicable saved as ''_BR.mat''.',...
        ' ''_BR.mat'' contains a data structure "rData" with the fields of "trigger"',...
        ' to correspond with the stimulus played, "question" corresponding with the',...
    	' question(s) asked, "response" corresponding to the subject''s',...
    	' response, and "responseTime" correspondingto the time it took the',...
    	' subject to answer the question.'],lineNum+1);
elseif strcmp(studyInfo.type,'Continuous Behav. Rating Study')
    if strcmp(studyInfo.coBeInfo.questOpts,'No end question(s)')
        line{subL+1}=sprintf(['%d. Data output. Your data is saved in the "data" folder of your',...
            ' experiment folder. The data is named with the subject number, the',...
            ' "today''s date" that was originally input at the time and',...
            ' presentation number, and recording number if applicable. There is',...
            ' Two data set. One is labeled: ''_CBR.mat'' for the continuous behavior response',...
            ' data, and the other is labeled: ''_QR.mat'' for the end question response.',...
            ' The ''_CBR.mat'' contains the cell array "cBRData" which contains in',...
            ' each cell from element 2 to the end the mouse slider position data for each presented',...
            ' stimuli scaled from 1-100. Mouse slider position was acquired approximately every',...
            ' ~50ms. Element 1 in each cell is the trigger identity of the stimulus presented.'],lineNum+1);
    else
        line{subL+1}=sprintf(['10. Data output. Your data is saved in the "data" folder of your',...
            ' experiment folder. The data is named with the subject number, the',...
            ' "today''s date" that was originally input at the time and',...
            ' presentation number, and recording number if applicable. There is',...
            ' Two data set. One is labeled: ''_CBR.mat'' for the continuous behavior response',...
            ' data, and the other is labeled: ''_QR.mat'' for the end question response.',...
            ' The ''_CBR.mat'' contains the cell array "cBRData" which contains in',...
            ' each cell from element 2 to the end the mouse slider position data for each presented',...
            ' stimuli scaled from 1-100. Mouse slider position was acquired approximately every',...
            ' ~50ms. Element 1 in each cell is the trigger identity of the stimulus presented.',...
            ' The ''_QR.mat'' contains a data structure "rData" with the fields of "trigger"',...
            ' to correspond with the stimulus played, "question" corresponding with the',...
            ' question(s) asked, "response" corresponding to the subject''s',...
            ' response, and "responseTime" correspondingto the time it took the',...
            ' subject to answer the question.'],lineNum+1);
    end
end

line{subL+4}='To troubleshoot this experiment:';

line{subL+6}=['1. If at anytime the experiment is behaving strangely, please',...
	' force quit the experiment and close MATLAB. Reboot MATLAB and',...
	' try again. Shutting down and rebooting your computer is also',...
	' recommended.']; 

line{subL+8}=['2. If the experiment freezes during run and force quit key does',...
	' not work (exception is during the end screen where force quit key',...
	' is disabled to perserve the data), try a combination of ctrl+c',...
	' and typing "sca" + Enter to grab control back, force close the',...
	' PsychToolBox screen and exit the experiment (this is for Windows,',...
	' please try the equivalent of this with MAC (i.e command+c)).']; 

line{subL+10}=['3. If "2" does not work, also try crtl+alt+delete, choose "Task',...
	' Manager" which will give you the control of the mouse and pops',...
	' back the Start menu. Exit the "PTB Onscreen Window [10]" and this',...
	' will sufficiently exit the experiment and give you back control.'];

line{subL+12}=['4. Once you are able to get back to the MATLAB command window,',...
	' scroll through and find out what the error is. It might be you',...
	' have accidently deleted something in your main experimental',...
	' script.'];

line{subL+14}=['5. Try using "check.m" to see if the problem isn''t because',...
	' something is missing in your experiment folder. Check',...
	' can help you restore some things like your stimStruct, stimArray',...
	' and qStruct.'];

line{subL+16}=['6. If 1-5 doesn''t work. Try going back and redesigning the',...
	' experiment using the Experiment Template MATLAB toolbox again.'];

line{subL+18}=['7. If all failed, try contacting the creator of the Experiment',...
	' Template MATLAB toolbox. She''s pretty nice and might be willing',...
	' to help you.'];


line{subL+21}='Other things to know:';

line{subL+23}='The essential *.m files:';

line{subL+25}=['1. ALL *.m files within your experiment folder are essential.',...
	' DO NOT DELETE any of them. Unless you know what you''re doing,',...
	' please do not modify any of them. If you are interested in what',... 
	' each does, while in the experiment folder in MATLAB simply type',...
	' "help [filename]" in the command line and this will pop up a',...
	' little description of what that file does.'];

line{subL+27}=sprintf('2. "%sExp.m" is your main experiment script. This is the one that runs everything.', studyInfo.name);

line{subL+29}=['3. "check.m" is your lifeline in case something goes wrong. Run',...
	' it when you need to update your experiment folder paths, restore your',...
	' stimulus structure, your stimulus array, your question array or switch between',...
    ' being "NI Ready" or not and being "Ethernet Ready" or not. It',...
	' is an add-on tool that the creator of Experiment Template MATLAB',...
	' toolbox made to help you. To use, navigate to your experiment',...
	' folder in MATLAB and type "check" or run the "check.m" script.'];

line{subL+31}=['4. If at any one of these *.m files are deleted, you are advised',... 
    ' to redesign everything via the Experiment Template MATLAB toolbox.'];

line{subL+33}='The essential *.mat files:';

line{subL+35}=sprintf(['1. "%s.mat" is your stimulus structure. This',...
	' carries all the information you input during Experiment Template',...
	' MATLAB toolbox when you upload your stimuli. This file is',...
	' essential to the running of your experiment. DO NOT DELETE.',...
	' However if you should move your experiment folder to a new',...
	' location, please use "check.m" to update study experiment paths which',... 
    ' will also update the structure.'], studyInfo.stimStructName);

line{subL+37}=sprintf(['2. "%s.mat" is your stimulus array. It carries',...
	' the information on the ordering of stimulus presentation that the',...
	' experiment will need to run. DO NOT DELETE. If you have',...
	' accidentally deleted this, please',...
    ' use "check.m" to restore this structure.'], studyInfo.stimArrayName);
subL=subL+38;

if strcmp(studyInfo.type,'Continuous Behav. Rating Study')
    if strcmp(studyInfo.coBeInfo.questOpts,'No end question(s)')
        line{subL+1}=sprintf(['3. "%s.mat" is your stim instruction structure. It',...
            ' contains all the continuous behavioral stim instruction information you set up',...
            ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
            ' have accidentally deleted this,',...
            ' use "check.m" to restore this structure.'], studyInfo.insStructName);
        
        line{subL+3}=['4. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+4;
    else
        line{subL+1}=sprintf(['3. "%s.mat" is your stim instruction structure. It',...
            ' contains all the continuous behavioral stim instruction information you set up',...
            ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
            ' have accidentally deleted this,',...
            ' use "check.m" to restore this structure.'], studyInfo.insStructName);
        
        line{subL+3}=sprintf(['4. "%s.mat" is your question structure. It',...
            ' contains all the questions configuration information you set up',...
            ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
            ' have accidentally deleted this,',...
            ' use "check.m" to restore this structure.'], studyInfo.qStructName);
        
        line{subL+5}=['5. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+6;
    end
elseif strcmp(studyInfo.type,'EEG Study')
    if strcmp(studyInfo.eSInfo.questOpts,'No question(s)')    
        line{subL+1}=['3. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+2;
    else
        line{subL+1}=sprintf(['3. "%s.mat" is your question structure. It',...
            ' contains all the questions configuration information you set up',...
            ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
            ' have accidentally deleted this,',...
            ' use "check.m" to restore this structure.'], studyInfo.qStructName);
        
        line{subL+2}=['4. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+3;
    end
elseif strcmp(studyInfo.type,'Neurophysiological Study')
    if strcmp(studyInfo.nSInfo.questOpts,'No question(s)')    
        line{subL+1}=['3. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+2;
    else
        line{subL+1}=sprintf(['3. "%s.mat" is your question structure. It',...
            ' contains all the questions configuration information you set up',...
            ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
            ' have accidentally deleted this,',...
            ' use "check.m" to restore this structure.'], studyInfo.qStructName);
        
        line{subL+2}=['4. "studyInfo.mat" contains all the information about your',...
            ' experiment that you''ve designed and specified using the',...
            ' Experiment Template MATLAB toolbox. IF you delete this your',...
            ' experiment will still run. HOWEVER, "check.m" will not work, and',...
            ' so therefore you are without the lifeline that was given to you.',...
            ' So DO NOT DELETE. There is no getting this back if you do. You',...
            ' simply have to use Experiment Template MATLAB toolboxto recreate',...
            ' your experiment to get this back.'];
        subL=subL+3;
    end    
elseif strcmp(studyInfo.type,'Behavioral Rating Study')
    line{subL+1}=sprintf(['3. "%s.mat" is your question structure. It',...
        ' contains all the questions configuration information you set up',...
        ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
        ' have accidentally deleted this,',...
        ' use "check.m" to restore this structure.'], studyInfo.qStructName);
    
    line{subL+2}=['4. "studyInfo.mat" contains all the information about your',...
        ' experiment that you''ve designed and specified using the',...
        ' Experiment Template MATLAB toolbox. IF you delete this your',...
        ' experiment will still run. HOWEVER, "check.m" will not work, and',...
        ' so therefore you are without the lifeline that was given to you.',...
        ' So DO NOT DELETE. There is no getting this back if you do. You',...
        ' simply have to use Experiment Template MATLAB toolboxto recreate',...
        ' your experiment to get this back.'];
    subL=subL+3;
elseif strcmp(studyInfo.type,'Comparison Behav. Rating Study')
    line{subL+1}=sprintf(['3. "%s.mat" is your question structure. It',...
        ' contains all the questions configuration information you set up',...
        ' during Experiment Template MATLAB toolbox. DO NOT DELETE. IF you',...
        ' have accidentally deleted this,',...
        ' use "check.m" to restore this structure.'], studyInfo.qStructName);
    
    line{subL+2}=['4. "studyInfo.mat" contains all the information about your',...
        ' experiment that you''ve designed and specified using the',...
        ' Experiment Template MATLAB toolbox. IF you delete this your',...
        ' experiment will still run. HOWEVER, "check.m" will not work, and',...
        ' so therefore you are without the lifeline that was given to you.',...
        ' So DO NOT DELETE. There is no getting this back if you do. You',...
        ' simply have to use Experiment Template MATLAB toolboxto recreate',...
        ' your experiment to get this back.'];
    subL=subL+3;
end

line{subL+1}='The essential folders:';

line{subL+3}=['1. The "stimulus" folder. This contains all your stimuli. DO NOT',...
	' DELETE. If you did please redesign the experiment with Experiment',...
	' Template MATLAB toolbox.'];

if studyInfo.yesData
    line{subL+5}=['2. The "data" folder. This contains your data output. Deleting',...
        ' this folder will result in the loss of all data therein. The creator',...
        ' of Experiment Template MATLAB toolbox is not responsible for your actions.',...
        ' Also, this folder your experiment will not run all the way',...
        ' through because it by deleting will try to save the data but fail',...
        ' to find the location to save to. To fix this (even though you''ve',...
        ' lost all your data unless you restore it from your trash), simply',...
        ' create a new "data" folder in the experiment folder, or use',...
        ' "check.m" which will run a check and help you recreate the missing',...
        ' "data" folder"'];
    
    line{subL+7}=['3. The "log" folder, contains logs of the stimulus ordering as',...
        ' was played during the run of the experiment. It is not as',...
        ' essential as the "stimulus" or "data" folder but the folder',...
        ' existence is essential for the running of the experiment. If',...
        ' deleted, you can recreate the folder yourself or use "check.m"',...
        ' to do it for you.'];
    
    line{subL+9}=['4. The "sup" folder stands for supplementary folder. This is',...
        ' an add-on folder that the creator of Experiment Template MATLAB',...
        ' toolbox made to help you. This folder IS essential if you want',...
        ' "check.m" to work. "check.m" will not work if you delete this',...
        ' folder even though your experiment will still run. DO NOT DELETE.',...
        ' If you do, you must redesign the experiment via the Experiment',...
        ' Template  MATLAB toolbox.'];
    
    subL=subL+11;
else
    line{subL+5}=['2. The "log" folder, contains logs of the stimulus ordering as',...
        ' was played during the run of the experiment. It is not as',...
        ' essential as the "stimulus" or "data" folder but the folder',...
        ' existence is essential for the running of the experiment. If',...
        ' deleted, you can recreate the folder yourself or use "check.m"',...
        ' to do it for you.'];
    
    line{subL+7}=['3. The "sup" folder stands for supplementary folder. This is',...
        ' an add-on folder that the creator of Experiment Template MATLAB',...
        ' toolbox made to help you. This folder IS essential if you want',...
        ' "check.m" to work. "check.m" will not work if you delete this',...
        ' folder even though your experiment will still run. DO NOT DELETE.',...
        ' If you do, you must redesign the experiment via the Experiment',...
        ' Template  MATLAB toolbox.'];
    
    subL=subL+9;
end

line{subL+1}='All right, that should be good enough for you to proceed as an experimenter!!!';

line{subL+3}='Good Luck,';
line{subL+4}='The Creators of AudExpCreator';

line{subL+6}='This "README-FIRST.txt" was generated by AudExpCreator.';
line{subL+7}='(c) Duc T. Nguyen and Blair Kaneshiro, 2017';
line{subL+8}='Distributed under Creative Commons Zero (CC0) license';
line{subL+9}='Contact: audexpcreator@gmail.com';


fName = sprintf('README-FIRST');
fID = fopen([studyInfo.path filesep fName '.txt'],'w');
for i=1:length(line)
    if any(ismember(i,tabLine))
        fprintf(fID,'\t%s\n',line{i});
    else
        fprintf(fID,'%s\n',line{i});
    end
end
fclose(fID);






