function studyInfo=wdrawmyoptions(studyInfo)
%   function studyInfo=wdrawmyoptions(studyInfo)
%
%   This funtion generates the drawmyoptions script for Comparison 
%   Behavioral Rating Study experiments created with the AudExpCreator.
%
% (c) Duc T. Nguyen and Blair Kaneshiro, 2017
% Distributed under Creative Commons Zero (CC0) license
% Contact: audexpcreator@gmail.com

line{1}=sprintf(['function drawmyoptions(wPtr, fontColor, xC, yC,'... 
    ' sL, x, %s, q, trigIndex)'], studyInfo.qStructName);

line{2}=sprintf('%% %s', line{1});
line{3}='% This function actually prints the question text and draws the stim options';
line{4}='% in boxes on the screen.';
dLines=4;
line{dLines+1}='%';
line{dLines+2}='% This script was generated by AudExpCreator.';
line{dLines+3}='% (c) Duc T. Nguyen and Blair Kaneshiro, 2017';
line{dLines+4}='% Distributed under Creative Commons Zero (CC0) license';
line{dLines+5}='% Contact: audexpcreator@gmail.com';
dOS=5;

line{dOS+6}='Screen(''TextSize'', wPtr, 20);';
line{dOS+7}=sprintf('myQtext=%s(trigIndex).question{q};', studyInfo.qStructName);
line{dOS+9}='[~, ~, ~] = DrawFormattedText(wPtr, myQtext, ''center'', yC-100, fontColor);';

line{dOS+11}='Screen(''TextSize'', wPtr, 15);';
line{dOS+12}=sprintf('myLtext=%s(trigIndex).qLow;', studyInfo.qStructName);
line{dOS+13}='[~, ~, ~] = DrawFormattedText(wPtr, myLtext, ''center'', ''center'', fontColor,...';
line{dOS+14}='[], [], [], [], [], [(xC-sL)-250 yC+100 (xC-sL)+250 yC+200]);';
line{dOS+15}='Screen(''FrameRect'', wPtr, fontColor, [(xC-sL)-100 yC+115 (xC-sL)+100 yC+200]);';

line{dOS+17}=sprintf('myRtext=%s(trigIndex).qHigh;',studyInfo.qStructName);
line{dOS+18}='[~, ~, ~] = DrawFormattedText(wPtr, myRtext, ''center'', ''center'', fontColor,...';
line{dOS+19}='[], [], [], [], [], [(xC+sL)-250 yC+100 (xC+sL)+250 yC+200]);';
line{dOS+20}='Screen(''FrameRect'', wPtr, fontColor, [(xC+sL)-100 yC+115 (xC+sL)+100 yC+200]);';

line{dOS+22}='myCtext = ''SAME'';';
line{dOS+23}='[~, ~, ~] = DrawFormattedText(wPtr, myCtext, ''center'', ''center'', fontColor,...';
line{dOS+24}='[], [], [], [], [], [xC-100 yC+100 xC+100 yC+200]);';
line{dOS+25}='Screen(''FrameRect'', wPtr, fontColor, [xC-100 yC+115 xC+100 yC+200]);';

line{dOS+26}='end';
tabLine=[dOS+14 dOS+19 dOS+24];

studyInfo.fLine.drawmopt = line{1}(10:end);

fName = 'drawmyoptions';
fID = fopen([studyInfo.path filesep fName '.m'],'w');
for i=1:length(line)
    if any(ismember(i,tabLine))
        fprintf(fID,'\t%s\n',line{i});
    else
        fprintf(fID,'%s\n',line{i});
    end
end
fclose(fID);